function getExclusiveSegmentGroup(e){for(var r=0,o=100*Math.random(),i=0;i<e.segments.length;i++){if(o>=r&&o<=r+e.segments[i].prob)return e.segments[i].id;r+=e.segments[i].prob}}function getInterestSegmentGroup(e){for(var r=[],o=0;o<e.segments.length;o++){var i=100*Math.random();i<=e.segments[o].prob&&r.push(e.segments[o].id)}return r}function findSegmentGroup(e,r){for(var o in r)for(var i=0;i<r[o].segments.length;i++)if(0==r[o].segments[i].id.localeCompare(e))return o;return null}function createSegmentInfoObject(e,r,o){return{id:e,type:r,exclusive:o}}function analyseDmpSegments(e,r){dmpSegmentsList=[],dmpSegmentLength=e.length;for(var o=0;o<dmpSegmentLength;o++)dmpSegmentsList.push(createSegmentInfoObject(e[o],findSegmentGroup(e[o],r),null));return dmpSegmentsList}function IsSegmentGroupPresent(e,r){segmentsLength=e.length;for(var o=0;o<segmentsLength;o++)if(null!=e[o].type&&0==e[o].type.localeCompare(r))return!0;return!1}function addToDmpSegmentsIfMissing(e,r){segmentsLength=e.length;for(var o=0;o<segmentsLength;o++)if(0==e[o].id.localeCompare(r.id))return;e.push(r)}function getInterestSegmentCount(e){var r=0;heuristicDmpSegmentsLength=e.length;for(var o=0;o<heuristicDmpSegmentsLength;o++)null!==e[o].type&&0==e[o].type.localeCompare(interestSegmentString)&&r++;return r}function mergeSegments(e,r){var o=getInterestSegmentCount(e),i=JSON.parse(JSON.stringify(e));heuristicSegmentsLength=r.length;for(var t=0;t<heuristicSegmentsLength;t++)r[t].exclusive?0==IsSegmentGroupPresent(e,r[t].type)&&i.push(r[t]):o<mergeSegmentLimit&&addToDmpSegmentsIfMissing(i,r[t]);return i}function processSegments(e,r){userHeuristicsSegments=[],userMergedSegmentsString=[];try{if(distribution=globalDistribution[e],null==distribution)return console.log("No distribution found for siteId: "+e),cX.getUserSegmentIds({persistedQueryId:r});for(var o in distribution){if(distribution[o].exclusive){var i=getExclusiveSegmentGroup(distribution[o]);void 0!=i&&userHeuristicsSegments.push(createSegmentInfoObject(i,o,distribution[o].exclusive))}else for(var t=getInterestSegmentGroup(distribution[o]),n=0;n<t.length;n++)userHeuristicsSegments.push(createSegmentInfoObject(t[n],o,distribution[o].exclusive))}dmpObjectSegments=analyseDmpSegments(cX.getUserSegmentIds({persistedQueryId:r}),distribution),userMergedSegments=mergeSegments(dmpObjectSegments,userHeuristicsSegments);for(var n=0;n<userMergedSegments.length;n++)userMergedSegmentsString.push(userMergedSegments[n].id)}catch(m){return console.log(m),cX.getUserSegmentIds({persistedQueryId:r})}return userMergedSegmentsString}globalDistribution={"1139586559825714233":{demographic:{exclusive:!0,segments:[{prob:13,id:"8m5lpiudth1f"},{prob:6,id:"8mgot1qulfvm"},{prob:13,id:"8mgot1qulfvn"},{prob:6,id:"8mgot1qulfvo"},{prob:33,id:"8mrrwjjrhedf"},{prob:32,id:"8mrrwjjrhedg"}],name:null},interestsSegment:{exclusive:!1,segments:[{prob:1,id:"8m5ln6nu85a2"},{prob:37,id:"8m5lrg68vf3c"},{prob:28,id:"8mgov4z0k9z2"},{prob:30,id:"8mgov4z0k9z3"},{prob:95,id:"8mgov4z0k9z5"},{prob:23,id:"8mgov4z0k9z6"},{prob:28,id:"8mgov4z0k9z7"},{prob:21,id:"8mrryj10stc2"},{prob:88,id:"8n2v21o4xb8o"}],name:null},socioeconomics:{exclusive:!0,segments:[{prob:66,id:"8m5lrg68vf3d"},{prob:6,id:"8mgov4z0k9z8"},{prob:28,id:"8mrryj10stc3"}],name:null}},"1139586559825714234":{demographic:{exclusive:!0,segments:[{prob:9,id:"8m5lpiudth1f"},{prob:6,id:"8mgot1qulfvm"},{prob:7,id:"8mgot1qulfvn"},{prob:5,id:"8mgot1qulfvo"},{prob:24,id:"8mrrwjjrhedf"},{prob:50,id:"8mrrwjjrhedg"}],name:null},interestsSegment:{exclusive:!1,segments:[{prob:1,id:"8m5ln6nu85a2"},{prob:52,id:"8m5lrg68vf3c"},{prob:101,id:"8mgov4z0k9z2"},{prob:42,id:"8mgov4z0k9z3"},{prob:100,id:"8mgov4z0k9z5"},{prob:25,id:"8mgov4z0k9z6"},{prob:40,id:"8mgov4z0k9z7"},{prob:21,id:"8mrryj10stc2"},{prob:46,id:"8n2v21o4xb8o"}],name:null},socioeconomics:{exclusive:!0,segments:[{prob:72,id:"8m5lrg68vf3d"},{prob:7,id:"8mgov4z0k9z8"},{prob:21,id:"8mrryj10stc3"}],name:null}},"1141838358903799475":{demographic:{exclusive:!0,segments:[{prob:6,id:"8m5lpiudth1f"},{prob:4,id:"8mgot1qulfvm"},{prob:6,id:"8mgot1qulfvn"},{prob:4,id:"8mgot1qulfvo"},{prob:39,id:"8mrrwjjrhedf"},{prob:43,id:"8mrrwjjrhedg"}],name:null},interestsSegment:{exclusive:!1,segments:[{prob:1,id:"8m5ln6nu85a2"},{prob:77,id:"8m5lrg68vf3c"},{prob:48,id:"8mgov4z0k9z2"},{prob:62,id:"8mgov4z0k9z3"},{prob:100,id:"8mgov4z0k9z5"},{prob:51,id:"8mgov4z0k9z6"},{prob:61,id:"8mgov4z0k9z7"},{prob:100,id:"8mrryj10stc2"},{prob:61,id:"8n2v21o4xb8o"}],name:null},socioeconomics:{exclusive:!0,segments:[{prob:80,id:"8m5lrg68vf3d"},{prob:5,id:"8mgov4z0k9z8"},{prob:15,id:"8mrryj10stc3"}],name:null}},"1141838358903799474":{demographic:{exclusive:!0,segments:[{prob:11,id:"8m5lpiudth1f"},{prob:7,id:"8mgot1qulfvm"},{prob:9,id:"8mgot1qulfvn"},{prob:6,id:"8mgot1qulfvo"},{prob:30,id:"8mrrwjjrhedf"},{prob:40,id:"8mrrwjjrhedg"}],name:null},interestsSegment:{exclusive:!1,segments:[{prob:1,id:"8m5ln6nu85a2"},{prob:63,id:"8m5lrg68vf3c"},{prob:36,id:"8mgov4z0k9z2"},{prob:55,id:"8mgov4z0k9z3"},{prob:94,id:"8mgov4z0k9z5"},{prob:30,id:"8mgov4z0k9z6"},{prob:45,id:"8mgov4z0k9z7"},{prob:27,id:"8mrryj10stc2"},{prob:48,id:"8n2v21o4xb8o"}],name:null},socioeconomics:{exclusive:!0,segments:[{prob:68,id:"8m5lrg68vf3d"},{prob:7,id:"8mgov4z0k9z8"},{prob:25,id:"8mrryj10stc3"}],name:null}},"1142984742184286082":{demographic:{exclusive:!0,segments:[{prob:10,id:"8m5lpiudth1f"},{prob:5,id:"8mgot1qulfvm"},{prob:11,id:"8mgot1qulfvn"},{prob:5,id:"8mgot1qulfvo"},{prob:35,id:"8mrrwjjrhedf"},{prob:35,id:"8mrrwjjrhedg"}],name:null},interestsSegment:{exclusive:!1,segments:[{prob:1,id:"8m5ln6nu85a2"},{prob:50,id:"8m5lrg68vf3c"},{prob:26,id:"8mgov4z0k9z2"},{prob:36,id:"8mgov4z0k9z3"},{prob:75,id:"8mgov4z0k9z5"},{prob:24,id:"8mgov4z0k9z6"},{prob:36,id:"8mgov4z0k9z7"},{prob:21,id:"8mrryj10stc2"},{prob:69,id:"8n2v21o4xb8o"}],name:null},socioeconomics:{exclusive:!0,segments:[{prob:69,id:"8m5lrg68vf3d"},{prob:7,id:"8mgov4z0k9z8"},{prob:24,id:"8mrryj10stc3"}],name:null}},"1133978062043370067":{demographic:{exclusive:!0,segments:[{prob:5,id:"8m5lpiudth1f"},{prob:3,id:"8mgot1qulfvm"},{prob:24,id:"8mgot1qulfvn"},{prob:10,id:"8mgot1qulfvo"},{prob:47,id:"8mrrwjjrhedf"},{prob:13,id:"8mrrwjjrhedg"}],name:null},interestsSegment:{exclusive:!1,segments:[{prob:5,id:"8m5ln6nu85a2"},{prob:101,id:"8m5lrg68vf3c"},{prob:19,id:"8mgov4z0k9z2"},{prob:32,id:"8mgov4z0k9z3"},{prob:102,id:"8mgov4z0k9z5"},{prob:17,id:"8mgov4z0k9z6"},{prob:34,id:"8mgov4z0k9z7"},{prob:15,id:"8mrryj10stc2"},{prob:29,id:"8n2v21o4xb8o"}],name:null},socioeconomics:{exclusive:!0,segments:[{prob:61,id:"8m5lrg68vf3d"},{prob:3,id:"8mgov4z0k9z8"},{prob:36,id:"8mrryj10stc3"}],name:null}},"1140732964728477843":{demographic:{exclusive:!0,segments:[{prob:5,id:"8m5lpiudth1f"},{prob:5,id:"8mgot1qulfvm"},{prob:7,id:"8mgot1qulfvn"},{prob:5,id:"8mgot1qulfvo"},{prob:44,id:"8mrrwjjrhedf"},{prob:38,id:"8mrrwjjrhedg"}],name:null},interestsSegment:{exclusive:!1,segments:[{prob:2,id:"8m5ln6nu85a2"},{prob:88,id:"8m5lrg68vf3c"},{prob:43,id:"8mgov4z0k9z2"},{prob:65,id:"8mgov4z0k9z3"},{prob:94,id:"8mgov4z0k9z5"},{prob:40,id:"8mgov4z0k9z6"},{prob:59,id:"8mgov4z0k9z7"},{prob:35,id:"8mrryj10stc2"},{prob:80,id:"8n2v21o4xb8o"}],name:null},socioeconomics:{exclusive:!0,segments:[{prob:80,id:"8m5lrg68vf3d"},{prob:6,id:"8mgov4z0k9z8"},{prob:14,id:"8mrryj10stc3"}],name:null}}},interestSegmentString="interestsSegment",mergeSegmentLimit=5;var userMergedSegments=[];
